{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SkillSwap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body>
    <!-- Top App Shell -->
    <header class="topbar">
      <div class="topbar-left">
        <img
          src="{% static 'assets/icons/logo.png' %}"
          alt="SkillSwap Logo"
          class="logo" />
        <span class="brand-main">SkillSwap</span>
        <span class="brand-sub">Local</span>
      </div>
      <nav class="nav">
        <button class="nav-link active" data-page="dashboard">Dashboard</button>
        <button class="nav-link" data-page="find-skill">Find a Skill</button>
        <button class="nav-link" data-page="offer-skill">Offer a Skill</button>
        <button class="nav-link" data-page="requests">Requests</button>
        <button class="nav-link" data-page="messages">Messages</button>
      </nav>
      <div class="topbar-right">
        <div class="credit-pill">
          <span class="credit-amount" id="creditAmount">0 credits</span>
          <span class="credit-sub" id="creditPending">Pending 0</span>
        </div>
        <div class="user-pill" id="userMenu">
          <div class="user-avatar" id="userAvatar">U</div>
          <span id="userNameTop">Guest</span>
          <button class="btn ghost small" id="logoutBtn">Logout</button>
        </div>
      </div>
    </header>

    <!-- Auth Modal -->
    <div class="backdrop" id="authModal">
      <div class="auth-card">
        <div class="auth-left">
          <h2>Welcome Back</h2>
          <p class="muted">Sign in to continue exchanging skills.</p>
          <form id="loginForm">
            <label>Email Address</label>
            <input
              type="email"
              id="loginEmail"
              placeholder="you@example.com"
              required />
            <label>Password</label>
            <div class="password-wrapper">
              <input
                type="password"
                id="loginPassword"
                placeholder="••••••••"
                required />
            </div>
            <p class="auth-error" id="loginError"></p>
            <button type="submit" class="btn primary full">Login</button>
          </form>
        </div>
        <div class="auth-right">
          <div class="pill pill-success">No money needed</div>
          <h2>Join the Community</h2>
          <p class="muted">Start exchanging skills with your neighbors.</p>
          <form id="signupForm">
            <label>Full Name</label>
            <input
              type="text"
              id="signupName"
              placeholder="John Doe"
              required />
            <label>Email Address</label>
            <input
              type="email"
              id="signupEmail"
              placeholder="you@example.com"
              required />
            <label>Password</label>
            <input
              type="password"
              id="signupPassword"
              placeholder="Create a strong password"
              required />
            <label class="checkbox">
              <input type="checkbox" id="signupTos" required />
              <span>I agree to the Terms of Service and Privacy Policy</span>
            </label>
            <p class="auth-error" id="signupError"></p>
            <button type="submit" class="btn success full">Sign Up Free</button>
          </form>
          <p class="sdg-tag">
            SDG 10: Reduced Inequalities · Exchange skills, not money.
          </p>
        </div>
      </div>
    </div>

    <!-- Main App Container -->
    <main class="shell">
      <!-- Dashboard -->
      <section class="page active" id="page-dashboard">
        <div class="page-inner">
          <div class="welcome-row">
            <div>
              <h1>Welcome back, <span id="dashboardName">User</span>!</h1>
              <p class="muted">
                You have <span id="pendingCount">0</span> pending requests
                requiring your attention.
              </p>
            </div>
            <div class="pill-pill">
              <span class="pill pill-soft-primary" id="creditsAvailable"
                >0 credits available</span
              >
              <span class="pill pill-soft" id="trustRating"
                >Trust rating: 4.5</span
              >
            </div>
          </div>

          <div class="cards-row">
            <div class="big-card green">
              <h2>Offer a Skill</h2>
              <p>Share your expertise with your community and earn credits.</p>
              <button class="btn light" data-page-jump="offer-skill">
                +1 credit per hour →
              </button>
            </div>
            <div class="big-card blue">
              <h2>Find a Skill</h2>
              <p>Discover talented neighbors ready to help you learn.</p>
              <button class="btn light" data-page-jump="find-skill">
                Browse nearby skills →
              </button>
            </div>
          </div>

          <div class="flex-row">
            <section class="panel flex-2">
              <div class="panel-header">
                <h3>My Offered Skills</h3>
                <button class="link" data-page-jump="offer-skill">
                  + Add New
                </button>
              </div>
              <div class="skill-list" id="offeredSkillsList"></div>
            </section>
            <aside class="panel flex-1">
              <div class="panel-header">
                <h3>Quick Stats</h3>
              </div>
              <ul class="stats-list">
                <li><span>My Offers</span><span id="statOffers">0</span></li>
                <li><span>Requests</span><span id="statRequests">0</span></li>
                <li>
                  <span>Completed Sessions</span
                  ><span id="statSessions">0</span>
                </li>
              </ul>
            </aside>
          </div>
        </div>
      </section>

      <!-- Find a Skill -->
      <section class="page" id="page-find-skill">
        <div class="page-inner">
          <h1>Find a Skill</h1>
          <p class="muted">
            Discover talented neighbors ready to share their expertise.
          </p>

          <div class="flex-row">
            <aside class="panel flex-1">
              <div class="form-group">
                <label>What do you want to learn?</label>
                <input
                  type="text"
                  id="searchSkillInput"
                  placeholder="Search skills..." />
              </div>
              <div class="form-group">
                <label>Distance Radius</label>
                <div class="slider-row">
                  <input
                    type="range"
                    min="1"
                    max="10"
                    value="5"
                    id="distanceSlider" />
                  <span id="distanceLabel">5 km</span>
                </div>
              </div>
              <div class="form-group">
                <label>Categories</label>
                <div class="chip-row" id="categoryChips">
                  <button class="chip chip-active" data-cat="All">All</button>
                  <button class="chip" data-cat="Education">Education</button>
                  <button class="chip" data-cat="Technology">Technology</button>
                  <button class="chip" data-cat="Arts">Arts</button>
                  <button class="chip" data-cat="Wellness">Wellness</button>
                  <button class="chip" data-cat="Home">Home</button>
                </div>
              </div>
              <div class="toggle-row">
                <label class="switch">
                  <input type="checkbox" id="availableNowToggle" />
                  <span class="slider"></span>
                </label>
                <span>Available now</span>
              </div>
              <div class="toggle-row">
                <label class="switch">
                  <input type="checkbox" id="weekendToggle" />
                  <span class="slider"></span>
                </label>
                <span>Weekend only</span>
              </div>
              <div class="sdg-box">
                Every hour is valued equally in SkillSwap Local – promoting fair
                exchange and reducing inequalities.
              </div>
            </aside>

            <section class="panel flex-2">
              <div class="map-placeholder">
                <div class="map-inner">
                  <div class="marker"></div>
                  <p>
                    Interactive map will display here<br />
                    <span class="muted"
                      >Showing skills within
                      <span id="mapRadius">5 km</span></span
                    >
                  </p>
                </div>
              </div>
              <h3 class="section-title">Nearby Skills</h3>
              <div class="skill-list" id="nearbySkillsList"></div>
            </section>
          </div>
        </div>
      </section>

      <!-- Offer a Skill -->
      <section class="page" id="page-offer-skill">
        <div class="page-inner narrow">
          <h1>Post a New Skill Offer</h1>
          <p class="muted">
            Share your expertise with the community and earn credits.
          </p>

          <div class="pill pill-soft-success">
            SDG 10: Reduced Inequalities – All skills are valued equally at 1
            credit per hour.
          </div>

          <form id="offerSkillForm" class="panel form-panel">
            <div class="form-group">
              <label>Category</label>
              <select id="offerCategory" required>
                <option value="">Select a category</option>
                <option>Education</option>
                <option>Technology</option>
                <option>Arts</option>
                <option>Wellness</option>
                <option>Home</option>
              </select>
            </div>
            <div class="form-group">
              <label>Skill Title</label>
              <input
                type="text"
                id="offerTitle"
                placeholder="e.g., Spanish Tutoring, Guitar Lessons"
                required />
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea
                id="offerDescription"
                rows="4"
                maxlength="250"
                placeholder="Describe what you'll teach, your approach, and what learners can expect..."
                required></textarea>
              <div class="char-count"><span id="descCount">0</span> / 250</div>
            </div>
            <div class="form-group">
              <label>Experience Level</label>
              <div class="slider-row">
                <input
                  type="range"
                  min="1"
                  max="5"
                  value="3"
                  id="experienceSlider" />
                <span id="experienceLabel">Intermediate</span>
              </div>
              <div class="level-scale">
                <span>Novice</span><span>Beginner</span><span>Intermediate</span
                ><span>Advanced</span><span>Expert</span>
              </div>
            </div>
            <div class="form-group">
              <label>Exchange Rate</label>
              <div class="pill pill-soft-success">1 credit / hour</div>
            </div>

            <div class="form-actions">
              <button
                type="button"
                class="btn ghost"
                data-page-jump="dashboard">
                Cancel
              </button>
              <button type="submit" class="btn primary">
                Post Skill Offer
              </button>
            </div>
          </form>
        </div>
      </section>

      <!-- Requests -->
      <section class="page" id="page-requests">
        <div class="page-inner">
          <h1>Requests Management</h1>
          <p class="muted">
            Manage your incoming and sent skill exchange requests.
          </p>

          <div class="tabs">
            <button class="tab active" data-req-tab="incoming">
              Incoming Requests <span id="incomingCount" class="badge">0</span>
            </button>
            <button class="tab" data-req-tab="sent">
              Sent Requests <span id="sentCount" class="badge">0</span>
            </button>
          </div>

          <div class="panel" id="incomingRequestsPanel">
            <div class="request-list" id="incomingRequestsList"></div>
          </div>
          <div class="panel hidden" id="sentRequestsPanel">
            <div class="request-list" id="sentRequestsList"></div>
          </div>
        </div>
      </section>

      <!-- Messages -->
      <section class="page" id="page-messages">
        <div class="page-inner">
          <h1>Messages</h1>
          <div class="messages-shell">
            <aside class="messages-sidebar">
              <div class="search-box">
                <input
                  type="text"
                  id="messageSearch"
                  placeholder="Search messages..." />
              </div>
              <div class="conversation-list" id="conversationList"></div>
              <button class="btn primary full" id="newChatBtn">
                + New Chat
              </button>
            </aside>
            <section class="messages-main">
              <div class="messages-header">
                <div>
                  <h3 id="activeChatName">Select a conversation</h3>
                  <p class="muted" id="activeChatSubtitle"></p>
                </div>
              </div>
              <div class="messages-thread" id="messageThread"></div>
              <form class="message-input-row" id="messageForm">
                <input
                  type="text"
                  id="messageInput"
                  placeholder="Type a message..."
                  autocomplete="off" />
                <button type="submit" class="btn primary icon-only">➤</button>
              </form>
            </section>
          </div>
        </div>
      </section>
    </main>

    <!-- Global page loader -->
    <div class="page-loading-overlay" id="pageLoader">
      <div class="loader-spinner"></div>
    </div>

    <script src="{% static 'js/script.js' %}"></script>
  </body>
</html>
